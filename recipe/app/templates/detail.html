{% extends "home.html" %}
{% block title %}{{ image.recipe_id.title }}{% endblock %}
{% block search_box %}{% endblock %}
{% block content %}
<br>
<div class="container py-5 rounded-4 shadow" style="background-color: rgb(255, 255, 255);">
    <div class="row py-1">
        <div class="col-6 col-lg-6">
            <div class="d-flex">
                <img src="https://myminiprojectrecipe.s3.eu-central-1.amazonaws.com/{{ image.created_by.profile.profile_pic }}" alt="..." width="38" height="40" class="rounded-circle custom-text-left-2">
                <a href="/profile/{{ image.created_by.id }}/" style="color: black;"><h5 class="mx-2">{{ image.created_by }}</h5></a>
            </div>
        </div>
        <div class=" col-6 col-lg-6 d-flex justify-content-end">
            <i class="bi bi-clock"></i>
            <p class="mx-2">{{ image.recipe_id.takes_time }}</p>
            <i class="bi bi-people"></i>
            <p class="custom-text-right">{{ image.recipe_id.for_how_many_people }}x</p>
        </div>
    </div>
    <div class="row">
        <div class="col-12 text-center">
            <h2>{{ image.recipe_id.title }}</h2>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <img class="mx-auto w-50 d-block rounded-3" src="https://myminiprojectrecipe.s3.eu-central-1.amazonaws.com/{{ image.image }}" alt="...">
        </div>
    </div>
    <div class="row py-4">
        <div class="col">
            <h4 class="custom-text-left">Category:</h4>
            {% if image.recipe_id.existing_category %}
                <p class="custom-text-left">{{ image.recipe_id.existing_category }}</p>
            {% elif image.recipe_id.own_category %}
                <p class="custom-text-left">{{ image.recipe_id.own_category }}</p>
            {% endif %}
        </div>
    </div>
    <div class="row py-4">
        <div class="col">
            <h4 class="custom-text-left">Potřebné suroviny:</h4>
            <p class="custom-text-left">{{ image.recipe_id.ingredient }}</p>
        </div>
    </div>
    <div class="row py-4">
        <div class="col container">
            <h4 class="custom-text-left">Postup:</h4>
            <p class="py-2 custom-text-left">{{ image.recipe_id.instructions }}</p>
        </div>
    </div>
    <div class="row py-4">
        <div class="col text-center justify-content-center embed-responsive embed-responsive-16by9">
            {% if image.recipe_id.link_to_youtube %}
                <h4 class="custom-text-left-2">Video na YouTube</h4>
                <iframe class="embed-responsive-item" allowfullscreen src="{{ image.recipe_id.link_to_youtube }}"></iframe>
            {% endif %}
        </div>
    </div>
    <div class="row py-3">
        <div class="col text-center">
            <form method="post">
                {% if user.is_authenticated %}
                    <div class="mb-3 custom-text-left">
                        {% csrf_token %}
                        {% load crispy_forms_tags %}
                        {{ comment_form|crispy }}
                        <br>
                        <button type="submit" class="btn btn-primary">Upload Comment</button>
                    </div>
                {% else %}
                    <h5>Prosim prihlaste se aby jste mohli napsat komenar</h5>
                {% endif %}
            </form>
        </div>
    </div>
    <div class="row py-3">
        <div class="col container">
            {% for comments in all_comment %}
                <div class="card mb-4">
                    <div class="card-body">
                        <p>{{ comments.comment }}</p>
                        <div class="d-flex justify-content-between">
                            <div class="d-flex flex-row align-items-center">
                                <a href="/profile/{{ image.created_by.id }}/" style="color: black;"><p class="small mb-0 ms-2">{{ comments.user_comment }}</p></a>
                            </div>
                            {% if comments.rating %}
                            <div class="d-flex flex-row align-items-center">
                                <p class="small text-muted mb-0">{{ comments.rating }}</p>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
                                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                                </svg>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <br>
            {% endfor %}
        </div>
    </div>
</div>
<br>
{% endblock %}